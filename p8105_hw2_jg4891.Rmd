---
title: "p8105_hw2_jg4891"
output: github_document
date: "2025-09-24"
---

```{r setup}
library(tidyverse)
options(tibble.print_min = 5)

```
## Problem 1
```{r pol_month}
pols_df <- read_csv("fivethirtyeight_datasets/pols-month.csv") %>%
  janitor::clean_names() %>%
  separate(mon, into = c("year", "month", "day"), sep = '-') %>%
  mutate(
    year  = as.character(year),
    month = as.integer(month),       # "01" -> 1, "02" -> 2
    month = month.name[month],       # full month names
    month = as.character(month),
    president = case_when(
      prez_gop == 1 ~ "Republican",
      prez_dem == 1 ~ "Democratic"
    )
  ) %>%
  select(-prez_gop, -prez_dem, -day)
```
```{r snp}
snp_df <- read_csv("fivethirtyeight_datasets/snp.csv") %>%
  janitor::clean_names() %>%
  separate(date, into = c("month", "day", "year"), sep = '/') %>%
  mutate(
    month = as.integer(month),
    year  = as.integer(year),
    year  = ifelse(year < 50, 2000 + year, 1900 + year),
    month = month.name[month],     # full month names
    year  = as.character(year),
    month = as.character(month)
  ) %>%
  select(-day) %>%
  select(year, month, everything())
```
```{r unemploy}
unemploy_df <- read_csv("fivethirtyeight_datasets/unemployment.csv") %>% 
janitor::clean_names() %>% 
pivot_longer(
    cols = jan:dec,                  # columns to pivot
    names_to = "month",              # new column with month names
    values_to = "unemployment_percent" # new column with values
  ) %>% 
  
  mutate(
    month = month.name[match(tolower(month), tolower(month.abb))],
    month = factor(month, levels = month.name, ordered = TRUE),
    year  = as.character(year),
    month = as.character(month)
  )
```
```{r merge}

ft_df = left_join(pols_df, snp_df, by = c("year", "month"))
Sd_df = left_join(ft_df, unemploy_df, by = c("year", "month"))
print(Sd_df)

```

Pols_df dataset contains the number of national politicians who are democratic or republican at any given time from 1947 Jan to 2015 June.
Snp_df dataset includes closing values of the S&P stock index from 1950 Jan to 2015 July.
Unemploy_df dataset includes unemployment percentages from  1948 Jan to 2015 Dec. 
This merged dataset reflects number of republican governors and senators, democratic governors and senators, and president's party, and unemployment percentage from 1947 to 2015.

##Problem 2

```{r}
  mr_df = 
  readxl::read_excel("Trash.xlsx", sheet="Mr. Trash Wheel", range = "A2:N653",na = c("NA", "", "."))|>
  filter(!is.na(Dumpster)) |> 
  janitor::clean_names() |> 
  mutate(sheet = "Mr. Trash") |> 
  mutate(sports_balls = as.integer(round(sports_balls)))

```


```{r}
  pr_df = 
  readxl::read_excel("Trash.xlsx", sheet="Professor Trash Wheel", range = "A2:M120",na = c("NA", "", "."))|>
  filter(!is.na(Dumpster)) |> 
  janitor::clean_names() |> 
  mutate(sheet = "Professor Trash") |> 
 filter(if_all(everything(), ~ !is.na(.)))

```

```{r}
  gw_df = 
  readxl::read_excel("Trash.xlsx", sheet="Gwynnda Trash Wheel", range = "A2:L265",na = c("NA", "", "."))|>
  filter(!is.na(Dumpster)) |> 
  janitor::clean_names() |> 
  mutate(sheet = "Gwynnda Trash") |> 
 filter(if_all(everything(), ~ !is.na(.)))

```

```{r}

df_tidy = bind_rows(gw_df %>% mutate(year = as.numeric(year)), mr_df%>% mutate(year = as.numeric(year)), pr_df%>% mutate(year = as.numeric(year))) |> 
  janitor::clean_names() |> 
  select(sheet, everything())



```
***merge by date? not sure 
***Write a paragraph about these data; you are encouraged to use inline R. Be sure to note the number of observations in the resulting dataset, and give examples of key variables. For available data, what was the total weight of trash collected by Professor Trash Wheel? What was the total number of cigarette butts collected by Gwynnda in June of 2022?

In Mr. Trash wheel data, we have `r nrow(df_tidy %>% filter(sheet == "Mr.Trash"))` observations. In Professor Trash Wheel dataset, we have `r nrow(pr_df)` observations, with the total weight of `r sum(pr_df$weight_tons)` tons of trash. In Gwynnda dataset, we have `r nrow(gw_df)` observations. The total number of cigarette butts collected is `r sum(gw_df$cigarette_butts)`.  "not sure if this is right"

##Problem 3
```{r}
z1_df = read_csv("zillow_data/Zip_NYC.csv", na = c("NA", "", ".")) |> 
  janitor::clean_names() |> 
  rename(zip_code=region_name)

z2_df <- read_csv("zillow_data/Zipcodes.csv",na = c("NA", "", ".")) |> 
  janitor::clean_names()

d1 <- left_join(z1_df, z2_df, by= "zip_code")
print(d1)
```











